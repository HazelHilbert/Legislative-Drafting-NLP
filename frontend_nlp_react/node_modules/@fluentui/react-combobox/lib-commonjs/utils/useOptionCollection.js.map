{"version":3,"sources":["useOptionCollection.js"],"sourcesContent":["import * as React from 'react';\n/**\n * A hook for managing a collection of child Options\n */ export const useOptionCollection = ()=>{\n    const nodes = React.useRef([]);\n    const collectionAPI = React.useMemo(()=>{\n        const getCount = ()=>nodes.current.length;\n        const getOptionAtIndex = (index)=>{\n            var _nodes_current_index;\n            return (_nodes_current_index = nodes.current[index]) === null || _nodes_current_index === void 0 ? void 0 : _nodes_current_index.option;\n        };\n        const getIndexOfId = (id)=>nodes.current.findIndex((node)=>node.option.id === id);\n        const getOptionById = (id)=>{\n            const item = nodes.current.find((node)=>node.option.id === id);\n            return item === null || item === void 0 ? void 0 : item.option;\n        };\n        const getOptionsMatchingText = (matcher)=>{\n            return nodes.current.filter((node)=>matcher(node.option.text)).map((node)=>node.option);\n        };\n        const getOptionsMatchingValue = (matcher)=>{\n            return nodes.current.filter((node)=>matcher(node.option.value)).map((node)=>node.option);\n        };\n        return {\n            getCount,\n            getOptionAtIndex,\n            getIndexOfId,\n            getOptionById,\n            getOptionsMatchingText,\n            getOptionsMatchingValue\n        };\n    }, []);\n    const registerOption = React.useCallback((option, element)=>{\n        var _nodes_current_index;\n        const index = nodes.current.findIndex((node)=>{\n            if (!node.element || !element) {\n                return false;\n            }\n            if (node.option.id === option.id) {\n                return true;\n            }\n            // use the DOM method compareDocumentPosition to order the current node against registered nodes\n            // eslint-disable-next-line no-bitwise\n            return node.element.compareDocumentPosition(element) & Node.DOCUMENT_POSITION_PRECEDING;\n        });\n        // do not register the option if it already exists\n        if (((_nodes_current_index = nodes.current[index]) === null || _nodes_current_index === void 0 ? void 0 : _nodes_current_index.option.id) !== option.id) {\n            const newItem = {\n                element,\n                option\n            };\n            // If an index is not found we will push the element to the end.\n            if (index === -1) {\n                nodes.current = [\n                    ...nodes.current,\n                    newItem\n                ];\n            } else {\n                nodes.current.splice(index, 0, newItem);\n            }\n        }\n        // return the unregister function\n        return ()=>{\n            nodes.current = nodes.current.filter((node)=>node.option.id !== option.id);\n        };\n    }, []);\n    return {\n        ...collectionAPI,\n        options: nodes.current.map((node)=>node.option),\n        registerOption\n    };\n};\n"],"names":["useOptionCollection","nodes","React","useRef","collectionAPI","useMemo","getCount","current","length","getOptionAtIndex","index","_nodes_current_index","option","getIndexOfId","id","findIndex","node","getOptionById","item","find","getOptionsMatchingText","matcher","filter","text","map","getOptionsMatchingValue","value","registerOption","useCallback","element","compareDocumentPosition","Node","DOCUMENT_POSITION_PRECEDING","newItem","splice","options"],"mappings":";;;;+BAGiBA;;;eAAAA;;;;iEAHM;AAGZ,MAAMA,sBAAsB;IACnC,MAAMC,QAAQC,OAAMC,MAAM,CAAC,EAAE;IAC7B,MAAMC,gBAAgBF,OAAMG,OAAO,CAAC;QAChC,MAAMC,WAAW,IAAIL,MAAMM,OAAO,CAACC,MAAM;QACzC,MAAMC,mBAAmB,CAACC;YACtB,IAAIC;YACJ,OAAO,AAACA,CAAAA,uBAAuBV,MAAMM,OAAO,CAACG,MAAM,AAAD,MAAO,QAAQC,yBAAyB,KAAK,IAAI,KAAK,IAAIA,qBAAqBC,MAAM;QAC3I;QACA,MAAMC,eAAe,CAACC,KAAKb,MAAMM,OAAO,CAACQ,SAAS,CAAC,CAACC,OAAOA,KAAKJ,MAAM,CAACE,EAAE,KAAKA;QAC9E,MAAMG,gBAAgB,CAACH;YACnB,MAAMI,OAAOjB,MAAMM,OAAO,CAACY,IAAI,CAAC,CAACH,OAAOA,KAAKJ,MAAM,CAACE,EAAE,KAAKA;YAC3D,OAAOI,SAAS,QAAQA,SAAS,KAAK,IAAI,KAAK,IAAIA,KAAKN,MAAM;QAClE;QACA,MAAMQ,yBAAyB,CAACC;YAC5B,OAAOpB,MAAMM,OAAO,CAACe,MAAM,CAAC,CAACN,OAAOK,QAAQL,KAAKJ,MAAM,CAACW,IAAI,GAAGC,GAAG,CAAC,CAACR,OAAOA,KAAKJ,MAAM;QAC1F;QACA,MAAMa,0BAA0B,CAACJ;YAC7B,OAAOpB,MAAMM,OAAO,CAACe,MAAM,CAAC,CAACN,OAAOK,QAAQL,KAAKJ,MAAM,CAACc,KAAK,GAAGF,GAAG,CAAC,CAACR,OAAOA,KAAKJ,MAAM;QAC3F;QACA,OAAO;YACHN;YACAG;YACAI;YACAI;YACAG;YACAK;QACJ;IACJ,GAAG,EAAE;IACL,MAAME,iBAAiBzB,OAAM0B,WAAW,CAAC,CAAChB,QAAQiB;QAC9C,IAAIlB;QACJ,MAAMD,QAAQT,MAAMM,OAAO,CAACQ,SAAS,CAAC,CAACC;YACnC,IAAI,CAACA,KAAKa,OAAO,IAAI,CAACA,SAAS;gBAC3B,OAAO;YACX;YACA,IAAIb,KAAKJ,MAAM,CAACE,EAAE,KAAKF,OAAOE,EAAE,EAAE;gBAC9B,OAAO;YACX;YACA,gGAAgG;YAChG,sCAAsC;YACtC,OAAOE,KAAKa,OAAO,CAACC,uBAAuB,CAACD,WAAWE,KAAKC,2BAA2B;QAC3F;QACA,kDAAkD;QAClD,IAAI,AAAC,CAAA,AAACrB,CAAAA,uBAAuBV,MAAMM,OAAO,CAACG,MAAM,AAAD,MAAO,QAAQC,yBAAyB,KAAK,IAAI,KAAK,IAAIA,qBAAqBC,MAAM,CAACE,EAAE,AAAD,MAAOF,OAAOE,EAAE,EAAE;YACrJ,MAAMmB,UAAU;gBACZJ;gBACAjB;YACJ;YACA,gEAAgE;YAChE,IAAIF,UAAU,CAAC,GAAG;gBACdT,MAAMM,OAAO,GAAG;uBACTN,MAAMM,OAAO;oBAChB0B;iBACH;YACL,OAAO;gBACHhC,MAAMM,OAAO,CAAC2B,MAAM,CAACxB,OAAO,GAAGuB;YACnC;QACJ;QACA,iCAAiC;QACjC,OAAO;YACHhC,MAAMM,OAAO,GAAGN,MAAMM,OAAO,CAACe,MAAM,CAAC,CAACN,OAAOA,KAAKJ,MAAM,CAACE,EAAE,KAAKF,OAAOE,EAAE;QAC7E;IACJ,GAAG,EAAE;IACL,OAAO;QACH,GAAGV,aAAa;QAChB+B,SAASlC,MAAMM,OAAO,CAACiB,GAAG,CAAC,CAACR,OAAOA,KAAKJ,MAAM;QAC9Ce;IACJ;AACJ"}