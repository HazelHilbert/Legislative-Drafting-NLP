{"version":3,"sources":["useCheckbox.js"],"sourcesContent":["import * as React from 'react';\nimport { useFieldControlProps_unstable } from '@fluentui/react-field';\nimport { getPartitionedNativeProps, useControllableState, useEventCallback, useId, useIsomorphicLayoutEffect, useMergedRefs, slot } from '@fluentui/react-utilities';\nimport { Checkmark12Filled, Checkmark16Filled, Square12Filled, Square16Filled, CircleFilled } from '@fluentui/react-icons';\nimport { Label } from '@fluentui/react-label';\nimport { useFocusWithin } from '@fluentui/react-tabster';\n/**\n * Create the state required to render Checkbox.\n *\n * The returned state can be modified with hooks such as useCheckboxStyles_unstable,\n * before being passed to renderCheckbox_unstable.\n *\n * @param props - props from this instance of Checkbox\n * @param ref - reference to `<input>` element of Checkbox\n */ export const useCheckbox_unstable = (props, ref)=>{\n    // Merge props from surrounding <Field>, if any\n    props = useFieldControlProps_unstable(props, {\n        supportsLabelFor: true,\n        supportsRequired: true\n    });\n    const { disabled = false, required, shape = 'square', size = 'medium', labelPosition = 'after', onChange } = props;\n    const [checked, setChecked] = useControllableState({\n        defaultState: props.defaultChecked,\n        state: props.checked,\n        initialState: false\n    });\n    const nativeProps = getPartitionedNativeProps({\n        props,\n        primarySlotTagName: 'input',\n        excludedPropNames: [\n            'checked',\n            'defaultChecked',\n            'size',\n            'onChange'\n        ]\n    });\n    const mixed = checked === 'mixed';\n    const id = useId('checkbox-', nativeProps.primary.id);\n    let checkmarkIcon;\n    if (mixed) {\n        if (shape === 'circular') {\n            checkmarkIcon = /*#__PURE__*/ React.createElement(CircleFilled, null);\n        } else {\n            checkmarkIcon = size === 'large' ? /*#__PURE__*/ React.createElement(Square16Filled, null) : /*#__PURE__*/ React.createElement(Square12Filled, null);\n        }\n    } else if (checked) {\n        checkmarkIcon = size === 'large' ? /*#__PURE__*/ React.createElement(Checkmark16Filled, null) : /*#__PURE__*/ React.createElement(Checkmark12Filled, null);\n    }\n    const state = {\n        shape,\n        checked,\n        disabled,\n        size,\n        labelPosition,\n        components: {\n            root: 'span',\n            input: 'input',\n            indicator: 'div',\n            label: Label\n        },\n        root: slot.always(props.root, {\n            defaultProps: {\n                ref: useFocusWithin(),\n                ...nativeProps.root\n            },\n            elementType: 'span'\n        }),\n        input: slot.always(props.input, {\n            defaultProps: {\n                type: 'checkbox',\n                id,\n                ref,\n                checked: checked === true,\n                ...nativeProps.primary\n            },\n            elementType: 'input'\n        }),\n        label: slot.optional(props.label, {\n            defaultProps: {\n                htmlFor: id,\n                disabled,\n                required,\n                size: 'medium'\n            },\n            elementType: Label\n        }),\n        indicator: slot.optional(props.indicator, {\n            renderByDefault: true,\n            defaultProps: {\n                'aria-hidden': true,\n                children: checkmarkIcon\n            },\n            elementType: 'div'\n        })\n    };\n    state.input.onChange = useEventCallback((ev)=>{\n        const val = ev.currentTarget.indeterminate ? 'mixed' : ev.currentTarget.checked;\n        onChange === null || onChange === void 0 ? void 0 : onChange(ev, {\n            checked: val\n        });\n        setChecked(val);\n    });\n    // Create a ref object for the input element so we can use it to set the indeterminate prop.\n    // Use useMergedRefs, since the ref might be undefined or a function-ref (no .current)\n    const inputRef = useMergedRefs(state.input.ref);\n    state.input.ref = inputRef;\n    // Set the <input> element's checked and indeterminate properties based on our tri-state property.\n    // Since indeterminate can only be set via javascript, it has to be done in a layout effect.\n    useIsomorphicLayoutEffect(()=>{\n        if (inputRef.current) {\n            inputRef.current.indeterminate = mixed;\n        }\n    }, [\n        inputRef,\n        mixed\n    ]);\n    return state;\n};\n"],"names":["useCheckbox_unstable","props","ref","useFieldControlProps_unstable","supportsLabelFor","supportsRequired","disabled","required","shape","size","labelPosition","onChange","checked","setChecked","useControllableState","defaultState","defaultChecked","state","initialState","nativeProps","getPartitionedNativeProps","primarySlotTagName","excludedPropNames","mixed","id","useId","primary","checkmarkIcon","React","createElement","CircleFilled","Square16Filled","Square12Filled","Checkmark16Filled","Checkmark12Filled","components","root","input","indicator","label","Label","slot","always","defaultProps","useFocusWithin","elementType","type","optional","htmlFor","renderByDefault","children","useEventCallback","ev","val","currentTarget","indeterminate","inputRef","useMergedRefs","useIsomorphicLayoutEffect","current"],"mappings":"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"}