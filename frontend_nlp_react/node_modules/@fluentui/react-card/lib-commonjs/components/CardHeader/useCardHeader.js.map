{"version":3,"sources":["useCardHeader.js"],"sourcesContent":["import * as React from 'react';\nimport { getIntrinsicElementProps, useId, slot } from '@fluentui/react-utilities';\nimport { useCardContext_unstable } from '../Card/CardContext';\nimport { cardHeaderClassNames } from './useCardHeaderStyles.styles';\n/**\n * Finds the first child of CardHeader with an id prop.\n *\n * @param header - the header prop of CardHeader\n */ function getChildWithId(header) {\n    function isReactElementWithIdProp(element) {\n        return React.isValidElement(element) && Boolean(element.props.id);\n    }\n    return React.Children.toArray(header).find(isReactElementWithIdProp);\n}\n/**\n * Returns the id to use for the CardHeader root element.\n *\n * @param headerId - the id prop of the CardHeader component\n * @param childWithId - the first child of the CardHeader component with an id prop\n * @param generatedId - a generated id\n *\n * @returns the id to use for the CardHeader root element\n */ function getReferenceId(headerId, childWithId, generatedId) {\n    if (headerId) {\n        return headerId;\n    }\n    if (childWithId === null || childWithId === void 0 ? void 0 : childWithId.props.id) {\n        return childWithId.props.id;\n    }\n    return generatedId;\n}\n/**\n * Create the state required to render CardHeader.\n *\n * The returned state can be modified with hooks such as useCardHeaderStyles_unstable,\n * before being passed to renderCardHeader_unstable.\n *\n * @param props - props from this instance of CardHeader\n * @param ref - reference to root HTMLElement of CardHeader\n */ export const useCardHeader_unstable = (props, ref)=>{\n    const { image, header, description, action } = props;\n    const { selectableA11yProps: { referenceId, setReferenceId } } = useCardContext_unstable();\n    const headerRef = React.useRef(null);\n    const hasChildId = React.useRef(false);\n    const generatedId = useId(cardHeaderClassNames.header, referenceId);\n    const headerSlot = slot.optional(header, {\n        renderByDefault: true,\n        defaultProps: {\n            ref: headerRef,\n            id: !hasChildId.current ? referenceId : undefined\n        },\n        elementType: 'div'\n    });\n    React.useEffect(()=>{\n        var _headerRef_current;\n        const headerId = !hasChildId.current ? (_headerRef_current = headerRef.current) === null || _headerRef_current === void 0 ? void 0 : _headerRef_current.id : undefined;\n        const childWithId = getChildWithId(headerSlot === null || headerSlot === void 0 ? void 0 : headerSlot.children);\n        hasChildId.current = Boolean(childWithId);\n        setReferenceId(getReferenceId(headerId, childWithId, generatedId));\n    }, [\n        generatedId,\n        header,\n        headerSlot,\n        setReferenceId\n    ]);\n    return {\n        components: {\n            root: 'div',\n            image: 'div',\n            header: 'div',\n            description: 'div',\n            action: 'div'\n        },\n        root: slot.always(getIntrinsicElementProps('div', {\n            // FIXME:\n            // `ref` is wrongly assigned to be `HTMLElement` instead of `HTMLDivElement`\n            // but since it would be a breaking change to fix it, we are casting ref to it's proper type\n            ref: ref,\n            ...props\n        }), {\n            elementType: 'div'\n        }),\n        image: slot.optional(image, {\n            elementType: 'div'\n        }),\n        header: headerSlot,\n        description: slot.optional(description, {\n            elementType: 'div'\n        }),\n        action: slot.optional(action, {\n            elementType: 'div'\n        })\n    };\n};\n"],"names":["useCardHeader_unstable","getChildWithId","header","isReactElementWithIdProp","element","React","isValidElement","Boolean","props","id","Children","toArray","find","getReferenceId","headerId","childWithId","generatedId","ref","image","description","action","selectableA11yProps","referenceId","setReferenceId","useCardContext_unstable","headerRef","useRef","hasChildId","useId","cardHeaderClassNames","headerSlot","slot","optional","renderByDefault","defaultProps","current","undefined","elementType","useEffect","_headerRef_current","children","components","root","always","getIntrinsicElementProps"],"mappings":";;;;+BAuCiBA;;;eAAAA;;;;iEAvCM;gCAC+B;6BACd;2CACH;AACrC;;;;CAIC,GAAG,SAASC,eAAeC,MAAM;IAC9B,SAASC,yBAAyBC,OAAO;QACrC,qBAAOC,OAAMC,cAAc,CAACF,YAAYG,QAAQH,QAAQI,KAAK,CAACC,EAAE;IACpE;IACA,OAAOJ,OAAMK,QAAQ,CAACC,OAAO,CAACT,QAAQU,IAAI,CAACT;AAC/C;AACA;;;;;;;;CAQC,GAAG,SAASU,eAAeC,QAAQ,EAAEC,WAAW,EAAEC,WAAW;IAC1D,IAAIF,UAAU;QACV,OAAOA;IACX;IACA,IAAIC,gBAAgB,QAAQA,gBAAgB,KAAK,IAAI,KAAK,IAAIA,YAAYP,KAAK,CAACC,EAAE,EAAE;QAChF,OAAOM,YAAYP,KAAK,CAACC,EAAE;IAC/B;IACA,OAAOO;AACX;AASW,MAAMhB,yBAAyB,CAACQ,OAAOS;IAC9C,MAAM,EAAEC,KAAK,EAAEhB,MAAM,EAAEiB,WAAW,EAAEC,MAAM,EAAE,GAAGZ;IAC/C,MAAM,EAAEa,qBAAqB,EAAEC,WAAW,EAAEC,cAAc,EAAE,EAAE,GAAGC,IAAAA,oCAAuB;IACxF,MAAMC,YAAYpB,OAAMqB,MAAM,CAAC;IAC/B,MAAMC,aAAatB,OAAMqB,MAAM,CAAC;IAChC,MAAMV,cAAcY,IAAAA,qBAAK,EAACC,+CAAoB,CAAC3B,MAAM,EAAEoB;IACvD,MAAMQ,aAAaC,oBAAI,CAACC,QAAQ,CAAC9B,QAAQ;QACrC+B,iBAAiB;QACjBC,cAAc;YACVjB,KAAKQ;YACLhB,IAAI,CAACkB,WAAWQ,OAAO,GAAGb,cAAcc;QAC5C;QACAC,aAAa;IACjB;IACAhC,OAAMiC,SAAS,CAAC;QACZ,IAAIC;QACJ,MAAMzB,WAAW,CAACa,WAAWQ,OAAO,GAAG,AAACI,CAAAA,qBAAqBd,UAAUU,OAAO,AAAD,MAAO,QAAQI,uBAAuB,KAAK,IAAI,KAAK,IAAIA,mBAAmB9B,EAAE,GAAG2B;QAC7J,MAAMrB,cAAcd,eAAe6B,eAAe,QAAQA,eAAe,KAAK,IAAI,KAAK,IAAIA,WAAWU,QAAQ;QAC9Gb,WAAWQ,OAAO,GAAG5B,QAAQQ;QAC7BQ,eAAeV,eAAeC,UAAUC,aAAaC;IACzD,GAAG;QACCA;QACAd;QACA4B;QACAP;KACH;IACD,OAAO;QACHkB,YAAY;YACRC,MAAM;YACNxB,OAAO;YACPhB,QAAQ;YACRiB,aAAa;YACbC,QAAQ;QACZ;QACAsB,MAAMX,oBAAI,CAACY,MAAM,CAACC,IAAAA,wCAAwB,EAAC,OAAO;YAC9C,SAAS;YACT,4EAA4E;YAC5E,4FAA4F;YAC5F3B,KAAKA;YACL,GAAGT,KAAK;QACZ,IAAI;YACA6B,aAAa;QACjB;QACAnB,OAAOa,oBAAI,CAACC,QAAQ,CAACd,OAAO;YACxBmB,aAAa;QACjB;QACAnC,QAAQ4B;QACRX,aAAaY,oBAAI,CAACC,QAAQ,CAACb,aAAa;YACpCkB,aAAa;QACjB;QACAjB,QAAQW,oBAAI,CAACC,QAAQ,CAACZ,QAAQ;YAC1BiB,aAAa;QACjB;IACJ;AACJ"}