{"version":3,"sources":["useCardPreview.js"],"sourcesContent":["import * as React from 'react';\nimport { getIntrinsicElementProps, useMergedRefs, slot } from '@fluentui/react-utilities';\nimport { useCardContext_unstable } from '../Card/CardContext';\nimport { cardPreviewClassNames } from './useCardPreviewStyles.styles';\n/**\n * Create the state required to render CardPreview.\n *\n * The returned state can be modified with hooks such as useCardPreviewStyles_unstable,\n * before being passed to renderCardPreview_unstable.\n *\n * @param props - props from this instance of CardPreview\n * @param ref - reference to root HTMLElement of CardPreview\n */ export const useCardPreview_unstable = (props, ref)=>{\n    const { logo } = props;\n    const { selectableA11yProps: { referenceLabel, referenceId, setReferenceLabel, setReferenceId } } = useCardContext_unstable();\n    // FIXME:\n    // `ref` is wrongly assigned to be `HTMLElement` instead of `HTMLDivElement`\n    // but since it would be a breaking change to fix it, we are casting ref to it's proper type\n    const previewRef = useMergedRefs(ref, React.useRef(null));\n    React.useEffect(()=>{\n        if (referenceLabel && referenceId) {\n            return;\n        }\n        if (previewRef.current && previewRef.current.parentNode) {\n            const img = previewRef.current.parentNode.querySelector(`.${cardPreviewClassNames.root} > img`);\n            if (img) {\n                const ariaLabel = img.getAttribute('aria-label');\n                const ariaDescribedby = img.getAttribute('aria-describedby');\n                if (ariaDescribedby) {\n                    setReferenceId(ariaDescribedby);\n                } else if (img.alt) {\n                    setReferenceLabel(img.alt);\n                } else if (ariaLabel) {\n                    setReferenceLabel(ariaLabel);\n                }\n            }\n        }\n    }, [\n        setReferenceLabel,\n        referenceLabel,\n        previewRef,\n        referenceId,\n        setReferenceId\n    ]);\n    return {\n        components: {\n            root: 'div',\n            logo: 'div'\n        },\n        root: slot.always(getIntrinsicElementProps('div', {\n            ref: previewRef,\n            ...props\n        }), {\n            elementType: 'div'\n        }),\n        logo: slot.optional(logo, {\n            elementType: 'div'\n        })\n    };\n};\n"],"names":["useCardPreview_unstable","props","ref","logo","selectableA11yProps","referenceLabel","referenceId","setReferenceLabel","setReferenceId","useCardContext_unstable","previewRef","useMergedRefs","React","useRef","useEffect","current","parentNode","img","querySelector","cardPreviewClassNames","root","ariaLabel","getAttribute","ariaDescribedby","alt","components","slot","always","getIntrinsicElementProps","elementType","optional"],"mappings":";;;;+BAYiBA;;;eAAAA;;;;iEAZM;gCACuC;6BACtB;4CACF;AAS3B,MAAMA,0BAA0B,CAACC,OAAOC;IAC/C,MAAM,EAAEC,IAAI,EAAE,GAAGF;IACjB,MAAM,EAAEG,qBAAqB,EAAEC,cAAc,EAAEC,WAAW,EAAEC,iBAAiB,EAAEC,cAAc,EAAE,EAAE,GAAGC,IAAAA,oCAAuB;IAC3H,SAAS;IACT,4EAA4E;IAC5E,4FAA4F;IAC5F,MAAMC,aAAaC,IAAAA,6BAAa,EAACT,KAAKU,OAAMC,MAAM,CAAC;IACnDD,OAAME,SAAS,CAAC;QACZ,IAAIT,kBAAkBC,aAAa;YAC/B;QACJ;QACA,IAAII,WAAWK,OAAO,IAAIL,WAAWK,OAAO,CAACC,UAAU,EAAE;YACrD,MAAMC,MAAMP,WAAWK,OAAO,CAACC,UAAU,CAACE,aAAa,CAAC,CAAC,CAAC,EAAEC,iDAAqB,CAACC,IAAI,CAAC,MAAM,CAAC;YAC9F,IAAIH,KAAK;gBACL,MAAMI,YAAYJ,IAAIK,YAAY,CAAC;gBACnC,MAAMC,kBAAkBN,IAAIK,YAAY,CAAC;gBACzC,IAAIC,iBAAiB;oBACjBf,eAAee;gBACnB,OAAO,IAAIN,IAAIO,GAAG,EAAE;oBAChBjB,kBAAkBU,IAAIO,GAAG;gBAC7B,OAAO,IAAIH,WAAW;oBAClBd,kBAAkBc;gBACtB;YACJ;QACJ;IACJ,GAAG;QACCd;QACAF;QACAK;QACAJ;QACAE;KACH;IACD,OAAO;QACHiB,YAAY;YACRL,MAAM;YACNjB,MAAM;QACV;QACAiB,MAAMM,oBAAI,CAACC,MAAM,CAACC,IAAAA,wCAAwB,EAAC,OAAO;YAC9C1B,KAAKQ;YACL,GAAGT,KAAK;QACZ,IAAI;YACA4B,aAAa;QACjB;QACA1B,MAAMuB,oBAAI,CAACI,QAAQ,CAAC3B,MAAM;YACtB0B,aAAa;QACjB;IACJ;AACJ"}