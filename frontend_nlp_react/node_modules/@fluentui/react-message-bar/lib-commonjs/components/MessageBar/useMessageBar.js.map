{"version":3,"sources":["useMessageBar.js"],"sourcesContent":["import * as React from 'react';\nimport { getIntrinsicElementProps, slot, useId, useMergedRefs } from '@fluentui/react-utilities';\nimport { useAnnounce_unstable } from '@fluentui/react-shared-contexts';\nimport { getIntentIcon } from './getIntentIcon';\nimport { useMessageBarReflow } from './useMessageBarReflow';\nimport { useMessageBarTransitionContext } from '../../contexts/messageBarTransitionContext';\n/**\n * Create the state required to render MessageBar.\n *\n * The returned state can be modified with hooks such as useMessageBarStyles_unstable,\n * before being passed to renderMessageBar_unstable.\n *\n * @param props - props from this instance of MessageBar\n * @param ref - reference to root HTMLElement of MessageBar\n */ export const useMessageBar_unstable = (props, ref)=>{\n    const { layout = 'auto', intent = 'info', politeness, shape = 'rounded' } = props;\n    const computedPoliteness = (politeness !== null && politeness !== void 0 ? politeness : intent === 'info') ? 'polite' : 'assertive';\n    const autoReflow = layout === 'auto';\n    const { ref: reflowRef, reflowing } = useMessageBarReflow(autoReflow);\n    const computedLayout = autoReflow ? reflowing ? 'multiline' : 'singleline' : layout;\n    const { className: transitionClassName, nodeRef } = useMessageBarTransitionContext();\n    const actionsRef = React.useRef(null);\n    const bodyRef = React.useRef(null);\n    const { announce } = useAnnounce_unstable();\n    const titleId = useId();\n    React.useEffect(()=>{\n        var _bodyRef_current, _actionsRef_current;\n        const bodyMessage = (_bodyRef_current = bodyRef.current) === null || _bodyRef_current === void 0 ? void 0 : _bodyRef_current.textContent;\n        const actionsMessage = (_actionsRef_current = actionsRef.current) === null || _actionsRef_current === void 0 ? void 0 : _actionsRef_current.textContent;\n        const message = [\n            bodyMessage,\n            actionsMessage\n        ].filter(Boolean).join(',');\n        announce(message, {\n            polite: computedPoliteness === 'polite',\n            alert: computedPoliteness === 'assertive'\n        });\n    }, [\n        bodyRef,\n        actionsRef,\n        announce,\n        computedPoliteness\n    ]);\n    return {\n        components: {\n            root: 'div',\n            icon: 'div',\n            bottomReflowSpacer: 'div'\n        },\n        root: slot.always(getIntrinsicElementProps('div', {\n            ref: useMergedRefs(ref, reflowRef, nodeRef),\n            role: 'group',\n            'aria-labelledby': titleId,\n            ...props\n        }), {\n            elementType: 'div'\n        }),\n        icon: slot.optional(props.icon, {\n            renderByDefault: true,\n            elementType: 'div',\n            defaultProps: {\n                children: getIntentIcon(intent)\n            }\n        }),\n        bottomReflowSpacer: slot.optional(props.bottomReflowSpacer, {\n            renderByDefault: computedLayout === 'multiline',\n            elementType: 'div'\n        }),\n        layout: computedLayout,\n        intent,\n        transitionClassName,\n        actionsRef,\n        bodyRef,\n        titleId,\n        shape\n    };\n};\n"],"names":["useMessageBar_unstable","props","ref","layout","intent","politeness","shape","computedPoliteness","autoReflow","reflowRef","reflowing","useMessageBarReflow","computedLayout","className","transitionClassName","nodeRef","useMessageBarTransitionContext","actionsRef","React","useRef","bodyRef","announce","useAnnounce_unstable","titleId","useId","useEffect","_bodyRef_current","_actionsRef_current","bodyMessage","current","textContent","actionsMessage","message","filter","Boolean","join","polite","alert","components","root","icon","bottomReflowSpacer","slot","always","getIntrinsicElementProps","useMergedRefs","role","elementType","optional","renderByDefault","defaultProps","children","getIntentIcon"],"mappings":";;;;+BAciBA;;;eAAAA;;;;iEAdM;gCAC8C;qCAChC;+BACP;qCACM;6CACW;AASpC,MAAMA,yBAAyB,CAACC,OAAOC;IAC9C,MAAM,EAAEC,SAAS,MAAM,EAAEC,SAAS,MAAM,EAAEC,UAAU,EAAEC,QAAQ,SAAS,EAAE,GAAGL;IAC5E,MAAMM,qBAAqB,AAACF,CAAAA,eAAe,QAAQA,eAAe,KAAK,IAAIA,aAAaD,WAAW,MAAK,IAAK,WAAW;IACxH,MAAMI,aAAaL,WAAW;IAC9B,MAAM,EAAED,KAAKO,SAAS,EAAEC,SAAS,EAAE,GAAGC,IAAAA,wCAAmB,EAACH;IAC1D,MAAMI,iBAAiBJ,aAAaE,YAAY,cAAc,eAAeP;IAC7E,MAAM,EAAEU,WAAWC,mBAAmB,EAAEC,OAAO,EAAE,GAAGC,IAAAA,2DAA8B;IAClF,MAAMC,aAAaC,OAAMC,MAAM,CAAC;IAChC,MAAMC,UAAUF,OAAMC,MAAM,CAAC;IAC7B,MAAM,EAAEE,QAAQ,EAAE,GAAGC,IAAAA,yCAAoB;IACzC,MAAMC,UAAUC,IAAAA,qBAAK;IACrBN,OAAMO,SAAS,CAAC;QACZ,IAAIC,kBAAkBC;QACtB,MAAMC,cAAc,AAACF,CAAAA,mBAAmBN,QAAQS,OAAO,AAAD,MAAO,QAAQH,qBAAqB,KAAK,IAAI,KAAK,IAAIA,iBAAiBI,WAAW;QACxI,MAAMC,iBAAiB,AAACJ,CAAAA,sBAAsBV,WAAWY,OAAO,AAAD,MAAO,QAAQF,wBAAwB,KAAK,IAAI,KAAK,IAAIA,oBAAoBG,WAAW;QACvJ,MAAME,UAAU;YACZJ;YACAG;SACH,CAACE,MAAM,CAACC,SAASC,IAAI,CAAC;QACvBd,SAASW,SAAS;YACdI,QAAQ7B,uBAAuB;YAC/B8B,OAAO9B,uBAAuB;QAClC;IACJ,GAAG;QACCa;QACAH;QACAI;QACAd;KACH;IACD,OAAO;QACH+B,YAAY;YACRC,MAAM;YACNC,MAAM;YACNC,oBAAoB;QACxB;QACAF,MAAMG,oBAAI,CAACC,MAAM,CAACC,IAAAA,wCAAwB,EAAC,OAAO;YAC9C1C,KAAK2C,IAAAA,6BAAa,EAAC3C,KAAKO,WAAWM;YACnC+B,MAAM;YACN,mBAAmBvB;YACnB,GAAGtB,KAAK;QACZ,IAAI;YACA8C,aAAa;QACjB;QACAP,MAAME,oBAAI,CAACM,QAAQ,CAAC/C,MAAMuC,IAAI,EAAE;YAC5BS,iBAAiB;YACjBF,aAAa;YACbG,cAAc;gBACVC,UAAUC,IAAAA,4BAAa,EAAChD;YAC5B;QACJ;QACAqC,oBAAoBC,oBAAI,CAACM,QAAQ,CAAC/C,MAAMwC,kBAAkB,EAAE;YACxDQ,iBAAiBrC,mBAAmB;YACpCmC,aAAa;QACjB;QACA5C,QAAQS;QACRR;QACAU;QACAG;QACAG;QACAG;QACAjB;IACJ;AACJ"}