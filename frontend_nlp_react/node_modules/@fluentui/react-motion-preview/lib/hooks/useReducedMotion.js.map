{"version":3,"sources":["useReducedMotion.ts"],"sourcesContent":["import * as React from 'react';\nimport { canUseDOM, useIsomorphicLayoutEffect } from '@fluentui/react-utilities';\nimport { useFluent_unstable as useFluent } from '@fluentui/react-shared-contexts';\n\n/**\n * @internal\n *\n * Returns whether the user has requested reduced motion based on the current media query.\n */\nexport const useReducedMotion = (): boolean => {\n  const fluent = useFluent();\n  const reducedMotion = React.useRef(false);\n  const targetWindow = canUseDOM() && fluent.targetDocument?.defaultView;\n\n  const onMediaQueryChange = React.useCallback((e: MediaQueryListEvent) => {\n    reducedMotion.current = e.matches;\n  }, []);\n\n  useIsomorphicLayoutEffect(() => {\n    if (!targetWindow || !targetWindow.matchMedia) {\n      return;\n    }\n\n    const match = targetWindow.matchMedia('screen and (prefers-reduced-motion: reduce)');\n\n    if (match.matches) {\n      reducedMotion.current = true;\n    }\n\n    match.addEventListener('change', onMediaQueryChange);\n\n    return () => match.removeEventListener('change', onMediaQueryChange);\n  }, [onMediaQueryChange, targetWindow]);\n\n  return reducedMotion.current;\n};\n"],"names":["React","canUseDOM","useIsomorphicLayoutEffect","useFluent_unstable","useFluent","useReducedMotion","fluent","reducedMotion","useRef","targetWindow","targetDocument","defaultView","onMediaQueryChange","useCallback","e","current","matches","matchMedia","match","addEventListener","removeEventListener"],"mappings":"AAAA,YAAYA,WAAW,QAAQ;AAC/B,SAASC,SAAS,EAAEC,yBAAyB,QAAQ,4BAA4B;AACjF,SAASC,sBAAsBC,SAAS,QAAQ,kCAAkC;AAElF;;;;CAIC,GACD,OAAO,MAAMC,mBAAmB;QAGMC;IAFpC,MAAMA,SAASF;IACf,MAAMG,gBAAgBP,MAAMQ,MAAM,CAAC;IACnC,MAAMC,eAAeR,iBAAeK,yBAAAA,OAAOI,cAAc,cAArBJ,6CAAAA,uBAAuBK,WAAW;IAEtE,MAAMC,qBAAqBZ,MAAMa,WAAW,CAAC,CAACC;QAC5CP,cAAcQ,OAAO,GAAGD,EAAEE,OAAO;IACnC,GAAG,EAAE;IAELd,0BAA0B;QACxB,IAAI,CAACO,gBAAgB,CAACA,aAAaQ,UAAU,EAAE;YAC7C;QACF;QAEA,MAAMC,QAAQT,aAAaQ,UAAU,CAAC;QAEtC,IAAIC,MAAMF,OAAO,EAAE;YACjBT,cAAcQ,OAAO,GAAG;QAC1B;QAEAG,MAAMC,gBAAgB,CAAC,UAAUP;QAEjC,OAAO,IAAMM,MAAME,mBAAmB,CAAC,UAAUR;IACnD,GAAG;QAACA;QAAoBH;KAAa;IAErC,OAAOF,cAAcQ,OAAO;AAC9B,EAAE"}