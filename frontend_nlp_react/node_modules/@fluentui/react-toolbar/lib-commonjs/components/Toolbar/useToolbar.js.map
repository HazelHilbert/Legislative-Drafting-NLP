{"version":3,"sources":["useToolbar.js"],"sourcesContent":["import * as React from 'react';\nimport { useEventCallback, useControllableState, getIntrinsicElementProps, slot } from '@fluentui/react-utilities';\nimport { useArrowNavigationGroup } from '@fluentui/react-tabster';\n/**\n * Create the state required to render Toolbar.\n *\n * The returned state can be modified with hooks such as useToolbarStyles_unstable,\n * before being passed to renderToolbar_unstable.\n *\n * @param props - props from this instance of Toolbar\n * @param ref - reference to root HTMLElement of Toolbar\n */ export const useToolbar_unstable = (props, ref)=>{\n    const { size = 'medium', vertical = false } = props;\n    const arrowNavigationProps = useArrowNavigationGroup({\n        circular: true,\n        axis: 'both'\n    });\n    const initialState = {\n        size,\n        vertical,\n        // TODO add appropriate props/defaults\n        components: {\n            // TODO add each slot's element type or component\n            root: 'div'\n        },\n        // TODO add appropriate slots, for example:\n        // mySlot: resolveShorthand(props.mySlot),\n        root: slot.always(getIntrinsicElementProps('div', {\n            role: 'toolbar',\n            // FIXME:\n            // `ref` is wrongly assigned to be `HTMLElement` instead of `HTMLDivElement`\n            // but since it would be a breaking change to fix it, we are casting ref to it's proper type\n            ref: ref,\n            ...vertical && {\n                'aria-orientation': 'vertical'\n            },\n            ...arrowNavigationProps,\n            ...props\n        }), {\n            elementType: 'div'\n        })\n    };\n    const [checkedValues, onCheckedValueChange] = useToolbarSelectableState({\n        checkedValues: props.checkedValues,\n        defaultCheckedValues: props.defaultCheckedValues,\n        onCheckedValueChange: props.onCheckedValueChange\n    });\n    const handleToggleButton = useEventCallback((e, name, value, checked)=>{\n        if (name && value) {\n            const checkedItems = (checkedValues === null || checkedValues === void 0 ? void 0 : checkedValues[name]) || [];\n            const newCheckedItems = [\n                ...checkedItems\n            ];\n            if (checked) {\n                newCheckedItems.splice(newCheckedItems.indexOf(value), 1);\n            } else {\n                newCheckedItems.push(value);\n            }\n            onCheckedValueChange === null || onCheckedValueChange === void 0 ? void 0 : onCheckedValueChange(e, {\n                name,\n                checkedItems: newCheckedItems\n            });\n        }\n    });\n    const handleRadio = useEventCallback((e, name, value, checked)=>{\n        if (name && value) {\n            onCheckedValueChange === null || onCheckedValueChange === void 0 ? void 0 : onCheckedValueChange(e, {\n                name,\n                checkedItems: [\n                    value\n                ]\n            });\n        }\n    });\n    return {\n        ...initialState,\n        handleToggleButton,\n        handleRadio,\n        checkedValues: checkedValues !== null && checkedValues !== void 0 ? checkedValues : {}\n    };\n};\n/**\n * Adds appropriate state values and handlers for selectable items\n * i.e checkboxes and radios\n */ const useToolbarSelectableState = (state)=>{\n    const [checkedValues, setCheckedValues] = useControllableState({\n        state: state.checkedValues,\n        defaultState: state.defaultCheckedValues,\n        initialState: {}\n    });\n    const { onCheckedValueChange: onCheckedValueChangeOriginal } = state;\n    const onCheckedValueChange = useEventCallback((e, { name, checkedItems })=>{\n        if (onCheckedValueChangeOriginal) {\n            onCheckedValueChangeOriginal(e, {\n                name,\n                checkedItems\n            });\n        }\n        setCheckedValues((s)=>{\n            return s ? {\n                ...s,\n                [name]: checkedItems\n            } : {\n                [name]: checkedItems\n            };\n        });\n    });\n    return [\n        checkedValues,\n        onCheckedValueChange\n    ];\n};\n"],"names":["useToolbar_unstable","props","ref","size","vertical","arrowNavigationProps","useArrowNavigationGroup","circular","axis","initialState","components","root","slot","always","getIntrinsicElementProps","role","elementType","checkedValues","onCheckedValueChange","useToolbarSelectableState","defaultCheckedValues","handleToggleButton","useEventCallback","e","name","value","checked","checkedItems","newCheckedItems","splice","indexOf","push","handleRadio","state","setCheckedValues","useControllableState","defaultState","onCheckedValueChangeOriginal","s"],"mappings":";;;;+BAWiBA;;;eAAAA;;;;iEAXM;gCACgE;8BAC/C;AAS7B,MAAMA,sBAAsB,CAACC,OAAOC;IAC3C,MAAM,EAAEC,OAAO,QAAQ,EAAEC,WAAW,KAAK,EAAE,GAAGH;IAC9C,MAAMI,uBAAuBC,IAAAA,qCAAuB,EAAC;QACjDC,UAAU;QACVC,MAAM;IACV;IACA,MAAMC,eAAe;QACjBN;QACAC;QACA,sCAAsC;QACtCM,YAAY;YACR,iDAAiD;YACjDC,MAAM;QACV;QACA,2CAA2C;QAC3C,0CAA0C;QAC1CA,MAAMC,oBAAI,CAACC,MAAM,CAACC,IAAAA,wCAAwB,EAAC,OAAO;YAC9CC,MAAM;YACN,SAAS;YACT,4EAA4E;YAC5E,4FAA4F;YAC5Fb,KAAKA;YACL,GAAGE,YAAY;gBACX,oBAAoB;YACxB,CAAC;YACD,GAAGC,oBAAoB;YACvB,GAAGJ,KAAK;QACZ,IAAI;YACAe,aAAa;QACjB;IACJ;IACA,MAAM,CAACC,eAAeC,qBAAqB,GAAGC,0BAA0B;QACpEF,eAAehB,MAAMgB,aAAa;QAClCG,sBAAsBnB,MAAMmB,oBAAoB;QAChDF,sBAAsBjB,MAAMiB,oBAAoB;IACpD;IACA,MAAMG,qBAAqBC,IAAAA,gCAAgB,EAAC,CAACC,GAAGC,MAAMC,OAAOC;QACzD,IAAIF,QAAQC,OAAO;YACf,MAAME,eAAe,AAACV,CAAAA,kBAAkB,QAAQA,kBAAkB,KAAK,IAAI,KAAK,IAAIA,aAAa,CAACO,KAAK,AAAD,KAAM,EAAE;YAC9G,MAAMI,kBAAkB;mBACjBD;aACN;YACD,IAAID,SAAS;gBACTE,gBAAgBC,MAAM,CAACD,gBAAgBE,OAAO,CAACL,QAAQ;YAC3D,OAAO;gBACHG,gBAAgBG,IAAI,CAACN;YACzB;YACAP,yBAAyB,QAAQA,yBAAyB,KAAK,IAAI,KAAK,IAAIA,qBAAqBK,GAAG;gBAChGC;gBACAG,cAAcC;YAClB;QACJ;IACJ;IACA,MAAMI,cAAcV,IAAAA,gCAAgB,EAAC,CAACC,GAAGC,MAAMC,OAAOC;QAClD,IAAIF,QAAQC,OAAO;YACfP,yBAAyB,QAAQA,yBAAyB,KAAK,IAAI,KAAK,IAAIA,qBAAqBK,GAAG;gBAChGC;gBACAG,cAAc;oBACVF;iBACH;YACL;QACJ;IACJ;IACA,OAAO;QACH,GAAGhB,YAAY;QACfY;QACAW;QACAf,eAAeA,kBAAkB,QAAQA,kBAAkB,KAAK,IAAIA,gBAAgB,CAAC;IACzF;AACJ;AACA;;;CAGC,GAAG,MAAME,4BAA4B,CAACc;IACnC,MAAM,CAAChB,eAAeiB,iBAAiB,GAAGC,IAAAA,oCAAoB,EAAC;QAC3DF,OAAOA,MAAMhB,aAAa;QAC1BmB,cAAcH,MAAMb,oBAAoB;QACxCX,cAAc,CAAC;IACnB;IACA,MAAM,EAAES,sBAAsBmB,4BAA4B,EAAE,GAAGJ;IAC/D,MAAMf,uBAAuBI,IAAAA,gCAAgB,EAAC,CAACC,GAAG,EAAEC,IAAI,EAAEG,YAAY,EAAE;QACpE,IAAIU,8BAA8B;YAC9BA,6BAA6Bd,GAAG;gBAC5BC;gBACAG;YACJ;QACJ;QACAO,iBAAiB,CAACI;YACd,OAAOA,IAAI;gBACP,GAAGA,CAAC;gBACJ,CAACd,KAAK,EAAEG;YACZ,IAAI;gBACA,CAACH,KAAK,EAAEG;YACZ;QACJ;IACJ;IACA,OAAO;QACHV;QACAC;KACH;AACL"}